<!DOCTYPE html>
<html>
    <head>
    <!-- navigation bars -->
    <link rel="icon" href="https://raw.githubusercontent.com/viveksai24/Guest_lecture_full_stack/main/images/logo_glm-removebg-preview.png" type = "image/x-icon"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.min.js" integrity="sha384-heAjqF+bCxXpCWLa6Zhcp4fu20XoNIA98ecBC1YkdXhszjoejr5y9Q77hIrv8R9i" crossorigin="anonymous"></script>
    <!-- <link rel="stylesheet" href="/stylesheets/about_style.css" type="text/css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="/test.css"> -->

    <!-- dashboards -->
    <!-- bundle -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- google icons and icons-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="icon" href="https://raw.githubusercontent.com/viveksai24/Guest_lecture_full_stack/main/images/logo_glm-removebg-preview.png" type="image/x-icon"> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- style sheets -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.min.js" integrity="sha384-heAjqF+bCxXpCWLa6Zhcp4fu20XoNIA98ecBC1YkdXhszjoejr5y9Q77hIrv8R9i" crossorigin="anonymous"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet"/>
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.3.0/mdb.min.css" rel="stylesheet"/>
    <!-- drop down -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" rel="stylesheet"/>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
    <title>Dashboard</title>

    <style>
        .hello_alert-box {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;  
        }

        .hello_success {
            color: #3c763d;
            background-color: #dff0d8;
            border-color: #d6e9c6;
            display: none;
        }
        #oval_parent{
            background: #eee;
            width:200px;
            height:120px;
            overflow:hidden;
        }
        #navbarSupportedContent ul li a{
            color: white;
        }
        #navbar-brand{
            color: white;
        }
        #oval{
            /* width: 220px;
            height: 100px;
            margin:10px 0 0 -10px;  
            background: white; */
            -moz-border-radius: 100px / 50px;
            -webkit-border-radius: 100px / 50px;
            border-radius: 100px / 50px;
        }
    </style>
    </head>
<%- include('header',{name:name}) %>
<div class="container w-75 p-5 justify-content-center">
    <br>
    <div style="border-bottom: 10px;">
        <h2><%= event_name %></h2>
    </div>  
    <div class="card">
        <div class="panel-Body scroll" >
            <div class="card-body" id="messageBody" style="position: relative; overflow-y:scroll; height:400px;">            
                <ul class="list-unstyled" id="chat">
                    <% for(var i=0;i<final.length;i++){%>
                        <% if (final[i].username==username) { %>
                            <li class="d-flex justify-content-end mb-4">
                                <div class="card w-75">
                                    <div class="card-header d-flex justify-content-between p-3">
                                        <p class="fw-bold mb-0"><%= name %></p>                                                            
                                    </div>
                                    <div class="card-body">
                                        <p class="mb-0">
                                            <%= final[i].message %>
                                        </p>
                                    </div>
                                </div>
                                <img src="https://media.istockphoto.com/id/1332100919/vector/man-icon-black-icon-person-symbol.jpg?s=612x612&w=0&k=20&c=AVVJkvxQQCuBhawHrUhDRTCeNQ3Jgt0K1tXjJsFy1eg="
                                    alt="avatar" class="rounded-circle d-flex align-self-start ms-3 shadow-1-strong" width="60">
                            </li>
                        <% } else {%>
                            <li class="d-flex mb-4">
                                <img src="https://png.pngtree.com/png-vector/20191009/ourmid/pngtree-group-icon-png-image_1796653.jpg"
                                    alt="avatar"
                                    class="rounded-circle d-flex align-self-start me-3 shadow-1-strong"
                                    width="60">
                                <div class="card w-75">
                                    <div class="card-header d-flex p-3">
                                        <p class="fw-bold mb-0"><%= final[i].name %></p>                                                            
                                    </div>
                                    <div class="card-body">
                                        <p class="mb-0">
                                            <%= final[i].message %>
                                        </p>
                                    </div>
                                </div>
                            </li>
                        <% } %>
                    <% } %>                                
                </ul>   
            </div>
        </div>
        <div class="card-footer align-items-center bg-white mb-3">
            <div class="form-outline">
                <form id="messageForm" action="/post_chats" method="post" style="width:100%;">
                    <label class="form-label" for="message">Message</label>
                    <div class="status" style="color: red;"></div>
                    <input type="text" name="message" class="mytext form-control" style="width:100%;" id="message">
                </form> 
            </div>
        </div> 
        <!-- <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>     -->
        <!-- <script src="/socket.io/socket.io.js"></script> -->
        <script src="https://cdn.socket.io/4.6.0/socket.io.min.js" integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+" crossorigin="anonymous"></script>
        <script>
            // Scroll to the bottom of the chat container when the page is reloaded
            window.onload = function() {
                var chatContainer = document.getElementById("messageBody");
                chatContainer.scrollTop = chatContainer.scrollHeight;
                function updateChat() {
                }
                setInterval(updateChat, 5000);
            };
        </script>
    </div> 
</div>
<%- include('footer') %>           
</body>
</html> 